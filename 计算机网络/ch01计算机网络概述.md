## 概述

### 定义

> 因特网（Internet）是一组全球信息资源的总汇。有一种粗略的说法，认为INTERNET是由于许多小的网络（子网）互联而成的一个逻辑网，每个子网中连接着若干台计算机（主机）。Internet以相互交流信息资源为目的，基于一些共同的协议，并通过许多路由器和公共互联网而成，它是一个信息资源和资源共享的集合
>
> -- 百度百科

每个主机通过通信链路和分组交换机连接到一起。当今，比较知名的分组交换机是：路由器router，和 链路层交换机link-layer switch。链路层交换机通常位于接入网中，而路由器通常用于网络核心中。从发送端主机到接收端主机，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的路径。

端系统通过ISP(Internet Service Provider)接入因特网，比如光纤、wifi、手机的3g4g5g等。ISP的作用就是将host连入Internet，不同的ISP之间也需要互联。

主机、分组交换机和其他因特网部件都要运行一系列协议，这些协议控制因特网中信息的接收和发送。TCP和IP是最重要的两个因特网协议。

> 协议定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和接收或其他事件时，所采取的动作

因特网广泛地使用了协议，不同的协议用于完成不同的通信任务。

## 网络边缘

虽然各种终端设备，像手机啊，电脑啊，ipad啊，包括服务器，虽然对于人类生活已经十分重要，但是其处于计算机网络的边缘，故也称为端系统。

### 接入网

将端系统物理连接到其边缘路由器的网络。边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。

* 家庭接入：DSL、电缆、FTTH、拨号、卫星
* 企业接入：以太网、WIFI
* 广域无线接入：3G、LTE

#### 物理媒体

* 双绞铜线
* 同轴电缆
* 光纤
* 陆地无线电信道
* 卫星无线电信道

## 网络核心

在各种网络应用中，主机彼此间通过交换报文通信。报文需要包含协议设计者需要的任何东西。报文可以执行一种控制功能或者携带数据。为了从发送主机到达接收主机，长报文需要划分为较小的数据块，称为packet分组，每个分组通过通信链路和分组交换机传送。

通过网络链路和交换机移动数据有两种基本方法：电路交换和分组交换

### 分组交换

### 存储转发传输机制与传输时延

大多数分组交换机在链路的输入端使用存储转发传输机制。即在交换机能够开始向输出链路传输改分组的第一个比特之前，必须接受到整个分组。

从接收到第一个比特，到接收到完整的分组的时间，称为传输时延。一般来说，传输时延与你的网络带宽成反比，带宽越大，传输时延越低

### 路由表、路由选择协议与处理时延

每台路由器都有一个转发表，用于将目的地址映射到输出链路。当分组到达路由器时，路由器检查该地址，并用这个地址搜索路由表，找到对应的输出路径。

搜索路由表的时间就是处理时延的一部分，处理时延也可以包括别的因素，比如packet的差错检测等。一般来说，处理时延通常是微妙或者更低的数量级

### 输出队列与排队时延

每台分组交换机有多条链路与之相连。对于每条相连的链路，该分组交换机具有一个输出缓存(也叫输出队列)，用于存储路由器准备发往那条链路的分组。如果到达的分组需要传输到某条链路，但该链路的输出缓存中还有别的分组，则会等待，从进入等待到开始处理的时间称为排队时延。既然是缓存，则必然有一个最大的大小，如果分组到达时，该缓存已满，则会丢弃改分组，即 丢包

### 传播时延

从链路的起点到一个路由器传播所需要的时间是传播时延。一个比特会以该链路的传播速率传播。传播速率取决于物理链路，一般等于或略小于光速。所以传播时延等于两台路由器的距离除以传播速率

## 协议分层

* 应用层

  应用层是网络应用程序及他们的应用层协议存留的地方。

  比如：

  * HTTP
  * SMTP
  * FTP
  * DNS

  应用层协议分布在多个端系统上，而一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息分组。一般把应用层的信息分组称为报文message

* 运输层

  在应用程序端点之间传送应用层报文。在因特网中，有两种运输层协议：

  * TCP
  * UDP

  运输层的分组一般称为报文段segment

* 网络层

  网络层的分组一般称为数据表datagram。网络层包含了网际协议IP，也包括决定路由的路由选择协议

* 链路层

  分组一般称为帧 frame

* 物理层

  物理层的任务是将frame中的每个bit从一个节点移动到下一个节点。与链路的实际物理传输媒体相关

#### 网络攻击

* 恶意软件
  * 病毒virus
  * 蠕虫worm

* 攻击服务器和网络基础设施
  * 拒绝服务攻击Dos
    * 弱点攻击
    * 带宽洪泛。攻击者向目标主机发送大量的分组，分组数量之多使目标的接入链路变得拥塞，使得合法的分组无法到达服务器
    * 连接洪泛。攻击者在目标主机中创建大量的半开或全开TCP连接，从而使其不能接受合法的连接

* 嗅探分组

  比如 wireshark

  解决：

  * 密码学

* 伪装

  将具有虚假源地址的分组注入因特网的能力被称为IP哄骗IP spoofing