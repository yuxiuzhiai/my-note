## 多路复用和多路分解

从运输层报文段中的数据交付到正确的套接字的工作称为多路分解

在源主机从不同的套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为多路复用

## UDP

UDP协议在IP协议之上，只做了很少的事情，除了复用、分解服务，以及少量的差错检验，它几乎没有对IP增加别的东西

优势

* 
* 无须建立连接。就是可以不需要TCP握手的那个额外的RTT时延
* 无连接状态。TCP需要保存连接的接收和发送缓存、拥塞控制参数以及序号与确认好的参数。而TCP没有这些状态，因此，运行在UDP之上的服务器一般可以支持更多的并发连接
* 分组首部开销小。TCP有20字节的首部，UDP只有8字节

### 报文格式

一共只有8字节的头部。两字节的源端口号，两字节的目的端口号，两字节的长度和两字节的校验和；

#### UDP校验和

只可以检测出差错，但是不能恢复

## 可靠数据传输

## TCP

## 拥塞控制原理

## TCP拥塞控制

由于IP层不向端系统提供显示的网络拥塞反馈，TCP所采用的方法是让每一个发送方根据所感知到的网络拥塞程度来限制其能向连接发送流量的速率。

如何确定发送速率：

* 一个丢失的报文段意味着拥塞，因此当丢失报文段时应当降低TCP发送方的速率
* 接收到ACK报文，意味着可以增加速度
* 带宽探测

### TCP拥塞控制算法

包括3个主要部分

* 慢启动
* 拥塞避免
* 快速恢复

#### 慢启动

当一条TCP连接开始时，cwnd的值通常初始置为一个MSS的较小值，这就使得初始发送速率大约为MSS/RTT。由于对TCP发送方而言，可用带宽可能比MSS/RTT大得多，TCP发送方希望迅速找到可用带宽的数量。因此，在慢启动状态，cwnd的值以1个MSS开始，并且每当传输的报文段首次被确认就增加一倍MSS。

因此，TCP发送速率起始慢，但是在慢启动阶段以指数增长。

#### 拥塞避免

#### 快速恢复

## 明确拥塞通告





